$().ready(function () {
    $(".btn-submit").on("click", function () {
        event.preventDefault();
        //Make an object to send to the back end
        var newUser = {};

        //Grab the form items
        $(".form-group :input").each(function () {
            var currentInput = $(this); // This is the jquery object of the input, do what you will
            var nameOfField = currentInput.attr("id");
            var fieldValue = currentInput.val().trim();
            newUser[nameOfField] = fieldValue;
        });
        //Console log the user object
        console.log("============== New User! ================");
        console.log(newUser);

        //Submit the new user via ajax
        $.post("/api/users", newUser)
            .done(function (data) {
                //if we succeeded then we GOT data!
                console.log(data);
            })
            .fail(function (err) {
                //if we failed, there was an error ):
                alert("Sorry, an error occurred");
                console.log(err);
            })
            .always(function () {
                //and regardless of whether we succeeded or failed:
                //always empty out the old form results ;)
                $(".form-group :input").each(function() {
                    $(this).val("");
                });
            });

    });
});